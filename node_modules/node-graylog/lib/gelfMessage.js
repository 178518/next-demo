"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var localIP_1 = require("./localIP");
var _ = require("lodash");
var pkg = require('../package.json');
var GelfMessage = /** @class */ (function () {
    function GelfMessage() {
        this.version = pkg.version;
        this._facility = 'node.js';
        this.host = localIP_1.default;
        this.timestamp = (new Date().getTime() / 1000);
    }
    GelfMessage.prototype.setApp = function (app) {
        this.app = app;
        return this;
    };
    GelfMessage.prototype.setHost = function (host) {
        if (host) {
            this.host = host;
        }
        return this;
    };
    GelfMessage.prototype.setLevel = function (level) {
        this.level = level;
        return this;
    };
    GelfMessage.prototype.setFile = function (file) {
        this.file = file;
        return this;
    };
    GelfMessage.prototype.setLine = function (line) {
        if (line) {
            this.line = line;
        }
        return this;
    };
    GelfMessage.prototype.setLogger = function (logger) {
        this.logger = logger;
        return this;
    };
    GelfMessage.prototype.setMarker = function (marker) {
        if (marker) {
            this.marker = marker;
        }
        return this;
    };
    GelfMessage.prototype.setThread = function (thread) {
        if (thread) {
            this.thread = thread;
        }
        return this;
    };
    GelfMessage.prototype.setRequestUri = function (requestUri) {
        if (requestUri) {
            this.requestUri = requestUri;
        }
        return this;
    };
    GelfMessage.prototype.setShortMessage = function (shortMessage) {
        this.shortMessage = shortMessage;
        return this;
    };
    GelfMessage.prototype.setFullMessage = function (fullMessage) {
        this.fullMessage = fullMessage;
        return this;
    };
    GelfMessage.prototype.setEnv = function (env) {
        this.env = env;
        return this;
    };
    GelfMessage.prototype.setCluster = function (cluster) {
        this.cluster = cluster;
        return this;
    };
    GelfMessage.prototype.toString = function () {
        return JSON.stringify(_.pickBy({
            version: this.version,
            app: this.app,
            host: this.host,
            file: this.file,
            logger: this.logger,
            short_message: this.shortMessage,
            full_message: this.fullMessage,
            request_uri: this.requestUri,
            marker: this.marker,
            thread: this.thread,
            line: this.line,
            _facility: this._facility,
            timestamp: this.timestamp,
            level: this.level,
            env: this.env,
            cluster: this.cluster
        }, function (o) { return o !== undefined && o !== null && o !== ''; }));
    };
    return GelfMessage;
}());
exports.default = GelfMessage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VsZk1lc3NhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ2VsZk1lc3NhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxxQ0FBZ0M7QUFDaEMsMEJBQTRCO0FBRTVCLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRXZDO0lBQUE7UUFDVSxZQUFPLEdBQVcsR0FBRyxDQUFDLE9BQU8sQ0FBQztRQUM5QixjQUFTLEdBQVcsU0FBUyxDQUFDO1FBQzlCLFNBQUksR0FBVyxpQkFBTyxDQUFDO1FBQ3ZCLGNBQVMsR0FBVyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7SUE2RzVELENBQUM7SUEvRkMsNEJBQU0sR0FBTixVQUFPLEdBQVc7UUFDaEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCw2QkFBTyxHQUFQLFVBQVEsSUFBWTtRQUNsQixJQUFJLElBQUksRUFBRTtZQUNSLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQ2xCO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsOEJBQVEsR0FBUixVQUFTLEtBQWE7UUFDcEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsNkJBQU8sR0FBUCxVQUFRLElBQVk7UUFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsNkJBQU8sR0FBUCxVQUFRLElBQVk7UUFDbEIsSUFBSSxJQUFJLEVBQUU7WUFDUixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNsQjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELCtCQUFTLEdBQVQs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